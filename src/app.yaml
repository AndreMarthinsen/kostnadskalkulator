runtime: nodejs20
env: standard

instance_class: F1 # Optional: Choose an appropriate instance class

automatic_scaling:
  max_instances: 3 # Maximum number of instances to run

# These handlers are mostly for efficiency only. They can be processed directly
# instead of redirecting the request to our nodejs app
handlers:
  - url: /api/.*
    script: auto

  # Serve all static files with url ending with a file extension
  - url: /(.*\..+)$
    secure: always
    redirect_http_response_code: 301
    static_files: client/build/\1
    upload: client/build/(.*\..+)$

  # Catch all handler to index.html
  - url: /.*
    secure: always
    redirect_http_response_code: 301
    static_files: client/build/index.html
    upload: client/build/index.html